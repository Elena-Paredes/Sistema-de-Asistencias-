-- phpMyAdmin SQL Dump
-- version 5.2.1
-- https://www.phpmyadmin.net/
--
-- Servidor: 127.0.0.1
-- Tiempo de generación: 16-08-2023 a las 18:44:05
-- Versión del servidor: 10.4.28-MariaDB
-- Versión de PHP: 8.2.4

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Base de datos: `sistema`
--

DELIMITER $$
--
-- Funciones
--
CREATE DEFINER=`root`@`localhost` FUNCTION `generar_idTurno` (`nCuenta_param` VARCHAR(255)) RETURNS VARCHAR(255) CHARSET utf8 COLLATE utf8_spanish_ci  BEGIN
    DECLARE turno_count INT;
    DECLARE idTurno_generated VARCHAR(255);
    
    -- Obtener el número de turnos que ya existen para el servicio social (nCuenta)
    SELECT COUNT(*) INTO turno_count FROM Turno WHERE nCuenta = nCuenta_param;
    
    -- Generar el idTurno en el formato "nCuenta-x"
    SET idTurno_generated = CONCAT(nCuenta_param, '-', turno_count + 1);
    
    RETURN idTurno_generated;
END$$

DELIMITER ;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `area`
--

CREATE TABLE `area` (
  `idArea` int(11) NOT NULL,
  `nombreArea` varchar(60) NOT NULL,
  `nombreAyudante` varchar(60) NOT NULL,
  `Token` varchar(30) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

--
-- Volcado de datos para la tabla `area`
--

INSERT INTO `area` (`idArea`, `nombreArea`, `nombreAyudante`, `Token`) VALUES
(1, 'Desarrollo', 'Omar Alejandro Sánchez Pérez', 'Token1'),
(2, 'Diseño, Comunicación y logística', 'Mtra. Alejandra Guzmán Huxley', 'Token2'),
(3, 'Infraestructura', 'Ing. Abraham Bonilla Pastor', 'Token3'),
(4, 'LMS', 'Ing. Diego Ramírez Romero', 'Token4'),
(6, 'Redes de datos', 'Héctor Martínez Garduño', 'Token5');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `bimestre`
--

CREATE TABLE `bimestre` (
  `idBimestre` int(11) NOT NULL,
  `periodoBim` varchar(20) DEFAULT NULL,
  `totalTurnosBim` int(11) DEFAULT NULL,
  `totalHorasBim` int(11) DEFAULT NULL,
  `nCuenta` varchar(9) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `completo`
--

CREATE TABLE `completo` (
  `idCompleto` int(11) NOT NULL,
  `periodoCompl` varchar(20) DEFAULT NULL,
  `totalTurnosCompl` int(11) DEFAULT NULL,
  `totalHorasCompl` int(11) DEFAULT NULL,
  `nCuenta` varchar(9) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `mes`
--

CREATE TABLE `mes` (
  `idMes` int(11) NOT NULL,
  `PeriodoMes` varchar(20) NOT NULL,
  `totalTurnosMes` int(11) NOT NULL,
  `totalHorasMes` int(11) NOT NULL,
  `nCuenta` varchar(9) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `proyecto`
--

CREATE TABLE `proyecto` (
  `idProyecto` int(11) NOT NULL,
  `nombreProyecto` varchar(60) NOT NULL,
  `FechaEntrega` date NOT NULL,
  `Descripcion` text NOT NULL,
  `nCuenta` varchar(9) NOT NULL,
  `idArea` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

--
-- Volcado de datos para la tabla `proyecto`
--

INSERT INTO `proyecto` (`idProyecto`, `nombreProyecto`, `FechaEntrega`, `Descripcion`, `nCuenta`, `idArea`) VALUES
(7, 'Gestión de calidad', '2023-08-22', 'Pruebas de vida', '315290167', 6);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `resumenss`
--

CREATE TABLE `resumenss` (
  `idResumen` int(11) NOT NULL,
  `periodo` varchar(30) NOT NULL,
  `totalTurnos` int(11) NOT NULL,
  `totalHoras` int(11) NOT NULL,
  `nCuenta` varchar(9) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `serviciosocial`
--

CREATE TABLE `serviciosocial` (
  `nCuenta` varchar(9) NOT NULL,
  `nombreSS` varchar(80) NOT NULL,
  `institucion` varchar(40) NOT NULL,
  `fInicioSS` date NOT NULL,
  `fFinSS` date NOT NULL,
  `correoSS` varchar(40) NOT NULL,
  `telefonoSS` varchar(10) NOT NULL,
  `huella` blob DEFAULT NULL,
  `idArea` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

--
-- Volcado de datos para la tabla `serviciosocial`
--

INSERT INTO `serviciosocial` (`nCuenta`, `nombreSS`, `institucion`, `fInicioSS`, `fFinSS`, `correoSS`, `telefonoSS`, `huella`, `idArea`) VALUES
('315290167', 'Pamela Itzel Hernandéz Martínez', 'Facultad de Ingeniería', '2015-05-23', '2015-11-23', 'fantasma@fantasma1.com', '3333333333', NULL, 6),
('315291168', 'Giovanni Giorgio', 'Facultad de Quimica', '2023-05-17', '2023-11-17', 'institucional@unam.mx', '1111111111', NULL, 4),
('316053206', 'Eduardo Fajardo Téllez', 'Facultad de Ingeniería', '2023-01-23', '2023-07-23', 'fantasma@fantasma1.com', '1111111111', NULL, 2),
('316057163', 'Brayan Ambriz', 'Facultad de Ingeniería', '2002-01-23', '2029-09-23', 'fantasma@fantasma1.com', '3333333333', NULL, 4),
('316155207', 'Nicte Ha', 'correo1@unam.mx', '2023-03-14', '2023-09-14', 'correo2@hotmail.com', '2222222222', NULL, 2),
('419049582', 'Rosaura Elena Paredes Pacab', 'Facultad de Ingeniería', '2023-09-01', '2023-07-09', 'chawy_07@hotmail.com', '9991372344', NULL, 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `turno`
--

CREATE TABLE `turno` (
  `idTurno` int(11) NOT NULL,
  `numTurno` varchar(20) NOT NULL,
  `fechaTurno` date NOT NULL,
  `hEntrada` time NOT NULL,
  `hSalida` time DEFAULT NULL,
  `actividad` text DEFAULT NULL,
  `nCuenta` varchar(9) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

--
-- Disparadores `turno`
--
DELIMITER $$
CREATE TRIGGER `before_insert_turno` BEFORE INSERT ON `turno` FOR EACH ROW BEGIN
    DECLARE turnos INT;

    SELECT COUNT(*) INTO turnos 
    FROM Turno
    WHERE nCuenta = NEW.nCuenta;

    SET NEW.numTurno = CONCAT(NEW.nCuenta, '-', turnos + 1);
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `turno_before_insert` BEFORE INSERT ON `turno` FOR EACH ROW BEGIN
    IF NEW.hSalida <= NEW.hEntrada OR TIMESTAMPDIFF(HOUR, NEW.hEntrada, NEW.hSalida) < 2 THEN
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'La hora de salida no puede ser menor o igual que la hora de entrada y el intervalo entre la hora de entrada y salida debe ser al menos de 2 horas.';
    END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `turno_before_insert_fecha` BEFORE INSERT ON `turno` FOR EACH ROW BEGIN
    DECLARE fInicioSS DATE;
    DECLARE fFinSS DATE;
    
    SELECT fInicioSS, fFinSS INTO @fInicioSS, @fFinSS FROM ServicioSocial WHERE nCuenta = NEW.nCuenta;

    IF NEW.FechaTurno < @fInicioSS OR NEW.FechaTurno > @fFinSS THEN
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'La fecha del turno debe estar entre las fechas de inicio y fin del servicio social.';
    END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `turno_before_update` BEFORE UPDATE ON `turno` FOR EACH ROW BEGIN
    IF NEW.hSalida <= NEW.hEntrada THEN
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'La hora de salida no puede ser menor o igual que la hora de entrada.';
    END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `turno_before_update_fecha` BEFORE UPDATE ON `turno` FOR EACH ROW BEGIN
    DECLARE fInicioSS DATE;
    DECLARE fFinSS DATE;
    
    SELECT fInicioSS, fFinSS INTO @fInicioSS, @fFinSS FROM ServicioSocial WHERE nCuenta = NEW.nCuenta;

    IF NEW.FechaTurno < @fInicioSS OR NEW.FechaTurno > @fFinSS THEN
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'La fecha del turno debe estar entre las fechas de inicio y fin del servicio social.';
    END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `usuarios`
--

CREATE TABLE `usuarios` (
  `id` int(11) NOT NULL,
  `usuario` varchar(40) NOT NULL,
  `password` varchar(50) NOT NULL,
  `nombre` varchar(80) NOT NULL,
  `tipo_usuario` int(11) NOT NULL,
  `imagen` blob NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

--
-- Volcado de datos para la tabla `usuarios`
--

INSERT INTO `usuarios` (`id`, `usuario`, `password`, `nombre`, `tipo_usuario`, `imagen`) VALUES
(1, 'Admin', '4e7afebcfbae000b22c7c85e5560f89a2a0280b4', 'Administrador', 1, 0xffd8ffe000104a46494600010101006000600000ffe110f44578696600004d4d002a000000080004013b00020000000e0000084a8769000400000001000008589c9d00010000001c000010d0ea1c00070000080c0000003e000000001cea000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000456c656e6120506172656465730000059003000200000014000010a69004000200000014000010ba929100020000000334390000929200020000000334390000ea1c00070000080c0000089a000000001cea000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000323032333a30373a32352031333a32303a343800323032333a30373a32352031333a32303a343800000045006c0065006e006100200050006100720065006400650073000000ffe10b20687474703a2f2f6e732e61646f62652e636f6d2f7861702f312e302f003c3f787061636b657420626567696e3d27efbbbf272069643d2757354d304d7043656869487a7265537a4e54637a6b633964273f3e0d0a3c783a786d706d65746120786d6c6e733a783d2261646f62653a6e733a6d6574612f223e3c7264663a52444620786d6c6e733a7264663d22687474703a2f2f7777772e77332e6f72672f313939392f30322f32322d7264662d73796e7461782d6e7323223e3c7264663a4465736372697074696f6e207264663a61626f75743d22757569643a66616635626464352d626133642d313164612d616433312d6433336437353138326631622220786d6c6e733a64633d22687474703a2f2f7075726c2e6f72672f64632f656c656d656e74732f312e312f222f3e3c7264663a4465736372697074696f6e207264663a61626f75743d22757569643a66616635626464352d626133642d313164612d616433312d6433336437353138326631622220786d6c6e733a786d703d22687474703a2f2f6e732e61646f62652e636f6d2f7861702f312e302f223e3c786d703a437265617465446174653e323032332d30372d32355431333a32303a34382e3438363c2f786d703a437265617465446174653e3c2f7264663a4465736372697074696f6e3e3c7264663a4465736372697074696f6e207264663a61626f75743d22757569643a66616635626464352d626133642d313164612d616433312d6433336437353138326631622220786d6c6e733a64633d22687474703a2f2f7075726c2e6f72672f64632f656c656d656e74732f312e312f223e3c64633a63726561746f723e3c7264663a53657120786d6c6e733a7264663d22687474703a2f2f7777772e77332e6f72672f313939392f30322f32322d7264662d73796e7461782d6e7323223e3c7264663a6c693e456c656e6120506172656465733c2f7264663a6c693e3c2f7264663a5365713e0d0a0909093c2f64633a63726561746f723e3c2f7264663a4465736372697074696f6e3e3c2f7264663a5244463e3c2f783a786d706d6574613e0d0a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a202020202020202020202020202020202020202020202020202020203c3f787061636b657420656e643d2777273f3effdb00430007050506050407060506080707080a110b0a09090a150f100c1118151a19181518171b1e27211b1d251d1718222e222528292b2c2b1a202f332f2a32272a2b2affdb0043010708080a090a140b0b142a1c181c2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2affc0001108005f004f03012200021101031101ffc4001f0000010501010101010100000000000000000102030405060708090a0bffc400b5100002010303020403050504040000017d01020300041105122131410613516107227114328191a1082342b1c11552d1f02433627282090a161718191a25262728292a3435363738393a434445464748494a535455565758595a636465666768696a737475767778797a838485868788898a92939495969798999aa2a3a4a5a6a7a8a9aab2b3b4b5b6b7b8b9bac2c3c4c5c6c7c8c9cad2d3d4d5d6d7d8d9dae1e2e3e4e5e6e7e8e9eaf1f2f3f4f5f6f7f8f9faffc4001f0100030101010101010101010000000000000102030405060708090a0bffc400b51100020102040403040705040400010277000102031104052131061241510761711322328108144291a1b1c109233352f0156272d10a162434e125f11718191a262728292a35363738393a434445464748494a535455565758595a636465666768696a737475767778797a82838485868788898a92939495969798999aa2a3a4a5a6a7a8a9aab2b3b4b5b6b7b8b9bac2c3c4c5c6c7c8c9cad2d3d4d5d6d7d8d9dae2e3e4e5e6e7e8e9eaf2f3f4f5f6f7f8f9faffda000c03010002110311003f00f3aa28a33fe4735f367ed414514b8ff38a60251452f519c1c7b0cd03128a28a04145145200af49f84be14d13c490eb737882cbed496490ba625752a0872df748fee8fcabcdabd7be07ff00c827c5bff5ef0ffe832d7461d2755267919cca50c149c5d9e9f8b43f4f4f847a9ea56d636da25f79d7122c69b9e60324e067f795c7fc50d074ef0e78d1ec346b7fb3db2dba3842ecfc9ce79639edeb553c1c07fc269a37fd7ec5dba7cc2b77e36ffc94797febd62fe46b5a8f9a95daea7161a9ba18f8c14db4e2deaefd51e795ea7f0e7c2fe17d47c11a9eb5e26b06bafb14adf3acaea42045380158579657aff803fe488f8a3eb2f3ebfbb5acf0f672d4ebce5cbeaeb95db54b4d37659d0ecbe13f88359834cb0d1aebcf9c909be6940e013ff3d3dabce3c77a5da68be38d4f4fd362f26da0902c69b8b6d1b54f5249fd6b6be1673f12b4a07a6e7ea7fd86aa1f143fe4a66b3ff5d87fe80b5a5597352bbee7360e9ca8660e9a9b6b96fabbf5393a500b74e7d31cd27a7bf4e3ad7a1fc1401be2163ae6d24ea3afddef5cf4a9fb49a89ec62f11f56c3ceaa57b1e795ebdf03ffe413e2dff00af787ff4196bc86bd7be05625b6f145b023cc96de2007aff00ad1fd47e75a61bf8abe7f91c19dffb8cbfeddfcd1c3f83bfe475d1bfebf22ffd0856e7c6cff928d27fd7ac5fd6b9ff000cca2d3c5fa54929c08af22dc4f6f985753f1aec677f88907951b3b5ddb4622503963b88c7d738fceadafdcbf530e651cc69c9edc8ff0043cf2c6c2eb52bc8ed34f81ee2e243848e31927fcfad7b9e85e14d43c31f0875bb0d4fca1797aaf2470a3e48ca0017ebc76abbe1af0dda7c3cd0623b126d6ee9332ca47ddcf61ec3f5355f55bd9d34cbbd5eecbcb1db29676cfbe303f3af3ab63561a7ec69ae6a8d6dd8f2f1b984f1b350a7f0296fd5b4ff00238cf00f87f51d1bc6361a9ea30f936f0962df302dca30e83debb3f107c3ff000a78bb55b9bf4d56e2d2fae4866c91b738c7dd23fad73be11f1249e29f16dbe942d0436f22b33b6edcc0052476c75c7e75dfdcf8755d653a55e477661255e20416523a8fafb5630ad98aa7cd2a69abec618daf569e254e52e49dba7ea78af8bfe18eb5e1346ba60b7b61d4dcdb8fba3fda5edf5e9537c1fd461d3be21dbb5c3aa2cd04b1872405076eeebe985af69f0eb5f48ef6b34266b2236c8b28e13e99ff00d06bc2fe24685a6e83e329edf44b98e4b693f786389b26063d54fb67a57a386ad19c562231b774ff0043d0c2e3678f84f055fe2b68d6df3391aee7e126be9a1f8ee05b8936437ca6d9c9e993cafea2b86a5525482a483d723fcf6eb534e6e12523e8f15416228ca93eaac76bf10bc3b2f86fc65751852b6f70e6e2d9fb1527271fee935e9fe13d7b40f1d8d1ae759644d73483b955d80f30e31b87a83c1c7622b98d0bc6ba1f8d7418bc3de3b7f2aea2f960bf271938c025bb37ae78354f53f839addbbf9fa1dd5aea5013ba3759363e3f97e46bb53b3e6a6ae7cad7e59d354314f9271d14ba3e9bf9a3bcd66ecde6af3c991b558aa73fc23fce6b8af895e30b19f4b83c37a1cab3448435dce9f75d87f083dfb93f415d1c96f2a5b1b7b9531ca136ba93f74e39fd6b034cf8516ba55baeabe36d56dedec170de5c6df7c7a16c77f402be7729e6a95eb49fc5d7cafb9cf87fab516a751bf77e15dd92fc27d39344d2b54f18eaa0c56b0c06380b71bc75623f1017f3ae0b42f1a6a3a378c9f5b8a571e7ce64b9881f96552d9208f5c1e3d2b6fe20fc418f5eb78f43f0f47f64d12db1b571b4cd8e9c765f6fc6b8155677088a5998e0003249f4af72a54e5b463d0f7b09837554ebe256b3e9d9745ea7a4f8d3e30ea1ae092cf400da7591386707f7b2fe23eefe19af35396259b24b7249e49fc69f3432db4ed0dc2345221c346e3054fb8aef7e0a80df104e467fd0e4edeeb59a6eacfde6747251cb70b29d08ecbeff0099e7d45145627a818e9ed5d07853c577fe19d6ed2e62ba9feca920335b893e575ee08e9d2b9fa29c5b8ec65568c2b41c26b73e9bd76086ee38759d39c4b6b7481b7a74e4641fc6abbc1a6f8a7c3b2787f5d3b13ac1377423a11ee3f957977c3bf894de198ce95ad2b5ce8f213c75683e83ba9f4edd6bd5a2d2ec75cb517be1bbd86ea06e7607ce0fa7b1f635c7570f56957fad6155efba3e0b1386a98397b3a8da49fbb23cbf51f823e26b6ba2ba7bdadec19f924120438ec483dff1ae87c25f0a13c39a843abf8baea067b760f0da4472370e849ef8f4aead74ed6edbe58e3b841fec3f1fa1a745e1ed56ee4ccc9e5fab4aff00cc52faed56ed4a83e634ab99626a53e49d456f2dd8dd5b4df0cf8ddbecfac589b7b927641751f0e33eff00d0f15c8787fc3169f0dfe2844ba9eb3682d66b394a4b3388ca8ca81bb3c727a633d0d74dac78a7c39e02b77692e5750d5b18482223e53eff00dd1ee6bc1bc41aedef893599f52d424ccd31e00e918ec07b76af42854ad1a69e2359f91d396e16be2232a7ccd526baf7f2b99b45145667da851451400b9f4fff00555ab0d52fb4ab81369b7735ac83f8a172a7fcfe9ed5528a36d89946335cb3573b08fe2b78d624dabae48476dd044dfcd7354351f1ef8a7558ca5eeb572c87aaa1080fe0a0573d455bab3b5afa1cb1c0e1632baa693f414b16625892c7a92724d25145436dbbb3b2c92b25a1ffd9);

--
-- Índices para tablas volcadas
--

--
-- Indices de la tabla `area`
--
ALTER TABLE `area`
  ADD PRIMARY KEY (`idArea`);

--
-- Indices de la tabla `bimestre`
--
ALTER TABLE `bimestre`
  ADD PRIMARY KEY (`idBimestre`),
  ADD KEY `FK_Bim_ServicioSocial` (`nCuenta`);

--
-- Indices de la tabla `completo`
--
ALTER TABLE `completo`
  ADD PRIMARY KEY (`idCompleto`),
  ADD KEY `FK_Compl_ServicioSocial` (`nCuenta`);

--
-- Indices de la tabla `mes`
--
ALTER TABLE `mes`
  ADD PRIMARY KEY (`idMes`),
  ADD KEY `FK_Mes_ServicioSocial` (`nCuenta`);

--
-- Indices de la tabla `proyecto`
--
ALTER TABLE `proyecto`
  ADD PRIMARY KEY (`idProyecto`),
  ADD KEY `FK_Proyecto_ServicioSocial` (`nCuenta`),
  ADD KEY `FK_Proyecto_Area` (`idArea`);

--
-- Indices de la tabla `resumenss`
--
ALTER TABLE `resumenss`
  ADD PRIMARY KEY (`idResumen`),
  ADD KEY `FK_Resumenss_ServicioSocial` (`nCuenta`);

--
-- Indices de la tabla `serviciosocial`
--
ALTER TABLE `serviciosocial`
  ADD PRIMARY KEY (`nCuenta`),
  ADD KEY `FK_ServicioSocial_Area` (`idArea`);

--
-- Indices de la tabla `turno`
--
ALTER TABLE `turno`
  ADD PRIMARY KEY (`idTurno`),
  ADD UNIQUE KEY `numTurno` (`numTurno`),
  ADD KEY `FK_Turno_ServicioSocial` (`nCuenta`);

--
-- Indices de la tabla `usuarios`
--
ALTER TABLE `usuarios`
  ADD PRIMARY KEY (`id`);

--
-- AUTO_INCREMENT de las tablas volcadas
--

--
-- AUTO_INCREMENT de la tabla `area`
--
ALTER TABLE `area`
  MODIFY `idArea` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=10;

--
-- AUTO_INCREMENT de la tabla `bimestre`
--
ALTER TABLE `bimestre`
  MODIFY `idBimestre` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT de la tabla `completo`
--
ALTER TABLE `completo`
  MODIFY `idCompleto` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT de la tabla `mes`
--
ALTER TABLE `mes`
  MODIFY `idMes` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT de la tabla `proyecto`
--
ALTER TABLE `proyecto`
  MODIFY `idProyecto` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=9;

--
-- AUTO_INCREMENT de la tabla `resumenss`
--
ALTER TABLE `resumenss`
  MODIFY `idResumen` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT de la tabla `turno`
--
ALTER TABLE `turno`
  MODIFY `idTurno` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=5;

--
-- AUTO_INCREMENT de la tabla `usuarios`
--
ALTER TABLE `usuarios`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- Restricciones para tablas volcadas
--

--
-- Filtros para la tabla `bimestre`
--
ALTER TABLE `bimestre`
  ADD CONSTRAINT `FK_Bim_ServicioSocial` FOREIGN KEY (`nCuenta`) REFERENCES `serviciosocial` (`nCuenta`) ON DELETE CASCADE;

--
-- Filtros para la tabla `completo`
--
ALTER TABLE `completo`
  ADD CONSTRAINT `FK_Compl_ServicioSocial` FOREIGN KEY (`nCuenta`) REFERENCES `serviciosocial` (`nCuenta`) ON DELETE CASCADE;

--
-- Filtros para la tabla `mes`
--
ALTER TABLE `mes`
  ADD CONSTRAINT `FK_Mes_ServicioSocial` FOREIGN KEY (`nCuenta`) REFERENCES `serviciosocial` (`nCuenta`) ON DELETE CASCADE;

--
-- Filtros para la tabla `proyecto`
--
ALTER TABLE `proyecto`
  ADD CONSTRAINT `FK_Bimestre_ServicioSocial` FOREIGN KEY (`nCuenta`) REFERENCES `serviciosocial` (`nCuenta`),
  ADD CONSTRAINT `FK_Proyecto_Area` FOREIGN KEY (`idArea`) REFERENCES `area` (`idArea`) ON DELETE CASCADE,
  ADD CONSTRAINT `FK_Proyecto_ServicioSocial` FOREIGN KEY (`nCuenta`) REFERENCES `serviciosocial` (`nCuenta`) ON DELETE CASCADE;

--
-- Filtros para la tabla `resumenss`
--
ALTER TABLE `resumenss`
  ADD CONSTRAINT `FK_Resumenss_ServicioSocial` FOREIGN KEY (`nCuenta`) REFERENCES `serviciosocial` (`nCuenta`) ON DELETE CASCADE;

--
-- Filtros para la tabla `serviciosocial`
--
ALTER TABLE `serviciosocial`
  ADD CONSTRAINT `FK_ServicioSocial_Area` FOREIGN KEY (`idArea`) REFERENCES `area` (`idArea`) ON DELETE CASCADE;

--
-- Filtros para la tabla `turno`
--
ALTER TABLE `turno`
  ADD CONSTRAINT `FK_Turno_ServicioSocial` FOREIGN KEY (`nCuenta`) REFERENCES `serviciosocial` (`nCuenta`) ON DELETE CASCADE;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
